<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>cgv: GUI Creation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cgv
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00012.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">GUI Creation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="a00710.html" title="namespace that holds the abstract gui interface ">cgv::gui</a> namespace implements abstract class with the minimal functionality necessary for graphical user interfaces. The implementation hands on all gui creation calls to a driver. The driver can be implemented with an arbitrary gui toolkit and loaded as a plugin. Currently, one driver is implemented in the <code>cg_fltk</code> plugin that builds on the fltk toolkit. Therefore, if <a class="el" href="a00710.html" title="namespace that holds the abstract gui interface ">cgv::gui</a> is used make sure to add <code>cg_fltk</code> to the list of dependent projects.</p>
<h1><a class="anchor" id="AbstGUI"></a>
Abstract GUI Interface</h1>
<p>The abstract gui implementation is composed of five components</p><ul>
<li>class that reflect gui elements ... these include<ul>
<li><a class="el" href="a00081.html" title="the application class is only a container for static methods that give access to the windows of the a...">cgv::gui::application</a> ... singleton class with static functions to create and enumerate windows</li>
<li><a class="el" href="a00092.html" title="gui independent group class which is a container for gui elements ">cgv::gui::gui_group</a> ... represents a gui element that manages child elements</li>
<li><a class="el" href="a00103.html" title="gui independent window class ">cgv::gui::window</a> ... represents a top level window that also acts as a group that can integrate other gui elements</li>
<li><a class="el" href="a00098.html" title="abstract base class for text editors ">cgv::gui::text_editor</a> ... a top level window that allows editing of text with syntax highlighting and callbacks when text is changed.</li>
<li><a class="el" href="a00083.html" title="gui independent button class that provides a click signal ">cgv::gui::button</a> ... a button basically has a name and a signal <code>click</code> that is emitted when the button is pressed</li>
<li><a class="el" href="a00102.html" title="class for gui elements that view values of the type specified in the template argument ...">cgv::gui::view</a> ... class that is templated over a value type representing a gui element that views a value of the given type</li>
<li><a class="el" href="a00084.html">cgv::gui::control</a> ... class again templated over the value type for gui elements that allow to change a value. Two signals are provide: <a class="el" href="a00084.html#a98f1acd3765c38931079bf9d866f8fd6" title="this signal is sent when the user triggered a change of value in order to check whether the new value...">cgv::gui::control::check_value</a> to check before the change of the value whether the change is valid and <a class="el" href="a00084.html#a49af8e128fc1e8443b95adbddfed009a" title="this signal is sent after the user triggered a change of value and the check_value succeeded...">cgv::gui::control::value_change</a> which is emitted after the value has actually changed</li>
</ul>
</li>
<li>classes that represent an <a class="el" href="a00087.html">cgv::gui::event</a> with specializations for <a class="el" href="a00093.html" title="class to represent all possible keyboard events with the EID_KEY ">cgv::gui::key_event</a> and <a class="el" href="a00095.html" title="class to represent all possible mouse events with the EID_MOUSE ">cgv::gui::mouse_event</a> as well as a <a class="el" href="a00101.html" title="a trigger provides callbacks after a programmable time delay ">cgv::gui::trigger</a> class with a signal emitted after a given time interval or in regular time intervals.</li>
<li>interface classes used by registered objects to tell the framework that they provide a gui or handle events<ul>
<li><a class="el" href="a00088.html" title="interface for all classes that want to receive events ">cgv::gui::event_handler</a> ... derive your class from this class and overload the <a class="el" href="a00088.html#aeef89567e820d30fc538b9be22083403" title="overload and implement this method to handle events ">cgv::gui::event_handler::handle()</a> method to receive and process events emitted in the 3d view</li>
<li><a class="el" href="a00096.html" title="derive from this class to provide a gui to the current viewer ">cgv::gui::provider</a> ... derive from this class and overload the <a class="el" href="a00096.html#a1d2f0b6c734c04d3c90a1c51ffbc0de9" title="you must overload this for gui creation ">cgv::gui::provider::create_gui()</a> method to implement your own gui. Use the add and inline methods of the <a class="el" href="a00096.html" title="derive from this class to provide a gui to the current viewer ">cgv::gui::provider</a> class to add gui elements.</li>
<li><a class="el" href="a00094.html" title="derive from this class to provide a gui to the current viewer ">cgv::gui::menu_provider</a> ... derive from this class and overload the <a class="el" href="a00094.html#a7743c83cb595e6eabda5b3ae45248949" title="you must overload this for menu creation ">cgv::gui::menu_provider::create_menu</a> and <a class="el" href="a00094.html#a6bc7d6a9caf6a2b55c76312b5635b079" title="you must overload this for to remove all elements from the menu again ">cgv::gui::menu_provider::destroy_menu</a> methods to add entries to the main menu with the add methods of the <code>menu_provider</code> class.</li>
</ul>
</li>
<li>convenience functions to ask for file names with <a class="el" href="a00710.html#ade084937f79b4eb38f78e9af6f97f279">cgv::gui::file_open_dialog()</a> or <a class="el" href="a00710.html#a3dca4a7fb286fb91dcfb045cdd492509">cgv::gui::file_save_dialog()</a>.</li>
<li>abstract interface class cgv::gui::driver for the implementation of a new gui driver</li>
</ul>
<p>In order to use the gui functionality, derive your class from the interface classes and reimplement the virtual methods. Examples for event handling can be found in examples plugin in the classes picker, mouse_tracker and simple_cube in simple_cube_8.h. The creation of a gui is illustrated in the classes gui_test in gui_test.cxx, simple_cube or shape.</p>
<h1><a class="anchor" id="createGUI"></a>
Implementing the createGUI method</h1>
<p>After deriving from <a class="el" href="a00096.html">provider</a> one has to reimplement the <a class="el" href="a00096.html#a1d2f0b6c734c04d3c90a1c51ffbc0de9">createGUI</a>-method. Here one uses the methods <a class="el" href="a00096.html#a5f624e9a95eb0b58dff0ac2a10fb6ed9">add_decorator</a>, <a class="el" href="a00096.html#aec4c2c18d5da07d5dadfececde56e48e">add_button</a>, <a class="el" href="a00096.html#a131206860106d3d07078508006151b7e">add_view</a>, <a class="el" href="a00096.html#ace5d812a9dc6b4132b67d0077cc6e22f">add_control</a>. These methods take the following arguments</p><ul>
<li>name of the gui element as string value</li>
<li>in case of views and controls a reference to a value</li>
<li>the type of the gui element as string (not for buttons), for example "slider" or "wheel" for numeric controls</li>
<li>an option string that is sent to the newly created gui element through the <a class="el" href="a00019.html#afbfaded48bb322a4b77350ca73c9e1a2">base::multi_set</a> method of the <a class="el" href="a00008.html#propInt">Property Interface</a>.</li>
<li>optionally a string describing the alignment of the next gui element can be specified, which defaults to "\n" such that by default gui elements are aligned in a vertical list. The available gui element types, options for gui elements and alignment depend on the used gui driver. For the <code>cg_fltk</code> plugin the options are described in the next section.</li>
</ul>
<p>The <a class="el" href="a00096.html#aec4c2c18d5da07d5dadfececde56e48e">add_button</a>, <a class="el" href="a00096.html#a131206860106d3d07078508006151b7e">add_view</a> and <a class="el" href="a00096.html#ace5d812a9dc6b4132b67d0077cc6e22f">add_control</a> methods return a reference counted pointer to the newly created gui element, which is primarily used to attach callbacks to the signals of the gui elements. The <a class="el" href="a00083.html">button</a> has a signal named <a class="el" href="a00083.html#a651a5767c513346539696870d99ea925">click</a> that takes a reference to the button as parameter. The <a class="el" href="a00084.html">control</a> has two signals <a class="el" href="a00084.html#a98f1acd3765c38931079bf9d866f8fd6">check_value</a> and <a class="el" href="a00084.html#a49af8e128fc1e8443b95adbddfed009a">value_change</a> that both take as parameter the reference to the control. Callbacks to functions, methods or C++ functors can be attached to the signals with the <a class="el" href="">connect</a> functions as described in the <a class="el" href="a00010.html#sigTut">Tutorial on the Usage of Signals</a>.</p>
<p>Finally, one can structure the gui into a tree with collapsable nodes. For this the <a class="el" href="a00096.html#a71d52460406852908aeaceb573cbd00e">add_tree_node(heading,flag,level)</a> method should be used. The <code>heading</code> parameter specifies the text representing the node. The <code>flag</code> parameter is a reference to a boolean that tells whether the node should be expanded or not. Finally, the <code>level</code> specifies the hierarchy level of the node, that starts with 0 on the root level. The <a class="el" href="a00096.html#a71d52460406852908aeaceb573cbd00e">add_tree_node</a> method returns the current value of the <code>flag</code> such that it can serve as condition for creating the gui of the sub tree as shown in the following code sample from the shape class in the examples plugin</p>
<pre class="fragment">shape.h</pre>  <div class="fragment"><div class="line"><span class="keyword">class </span>shape : </div>
<div class="line">        <span class="keyword">public</span> <a class="code" href="a00035.html">cgv::base::group</a>,          </div>
<div class="line">        <span class="keyword">public</span> <a class="code" href="a00088.html">cgv::gui::event_handler</a>,  </div>
<div class="line">        <span class="keyword">public</span> <a class="code" href="a00226.html">cgv::render::drawable</a>,    </div>
<div class="line">        <span class="keyword">public</span> <a class="code" href="a00096.html">cgv::gui::provider</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">        <span class="keywordtype">bool</span> node_flag;</div>
<div class="line">        <span class="keywordtype">bool</span> show_edges;</div>
<div class="line">        <span class="keywordtype">bool</span> show_faces;</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">        <span class="keywordtype">int</span> resolution;</div>
<div class="line">        <span class="keyword">enum</span> Shape { CUBE, PRI, TET, OCT, DOD, ICO, CYL, CONE, DISK, ARROW, SPHERE, STRIP } shp;</div>
<div class="line">        <span class="keywordtype">double</span> ax, ay;</div>
<div class="line">        <span class="keywordtype">double</span> x;</div>
<div class="line">        <span class="keywordtype">bool</span> no_flat;</div>
<div class="line">        <span class="keywordtype">void</span> select_cube(<a class="code" href="a00083.html">cgv::gui::button</a>&amp;);</div>
<div class="line">        <span class="keywordtype">void</span> select_prism(<a class="code" href="a00083.html">cgv::gui::button</a>&amp;);</div>
</div><!-- fragment --></p>
<pre class="fragment">shape.cxx</pre>  <div class="fragment"><div class="line"><span class="keywordtype">void</span> shape::select_cube(button&amp;)</div>
<div class="line">{</div>
<div class="line">        shp = CUBE;</div>
<div class="line">        update_member(&amp;shp);</div>
<div class="line">        post_redraw();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> shape::select_strip(button&amp;)</div>
<div class="line">{</div>
<div class="line">        shp = STRIP;</div>
<div class="line">        update_member(&amp;shp);</div>
<div class="line">        post_redraw();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> shape::create_gui()</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// connect a permanent copy of the functor returned by the</span></div>
<div class="line">        <span class="comment">// rebind function to the value_change signal of the newly</span></div>
<div class="line">        <span class="comment">// created integer control</span></div>
<div class="line">        connect_copy(</div>
<div class="line">                add_control(<span class="stringliteral">&quot;resolution&quot;</span>, resolution, <span class="stringliteral">&quot;value_slider&quot;</span>, </div>
<div class="line">                <span class="comment">// configure the sliders min and max values, add tick marks</span></div>
<div class="line">                <span class="comment">// and use a logarithmic scaling along the slider</span></div>
<div class="line">                <span class="stringliteral">&quot;min=4;max=50;ticks=true;log=true&quot;</span>)-&gt;value_change,</div>
<div class="line">                <span class="comment">// construct a functor that always calls the post_redraw</span></div>
<div class="line">                <span class="comment">// method of the drawable base class</span></div>
<div class="line">                rebind(static_cast&lt;drawable*&gt;(<span class="keyword">this</span>), &amp;drawable::post_redraw)</div>
<div class="line">        );</div>
<div class="line">        add_member_control(<span class="keyword">this</span>, <span class="stringliteral">&quot;edges&quot;</span>, show_edges, <span class="stringliteral">&quot;check&quot;</span>);</div>
<div class="line">        add_member_control(<span class="keyword">this</span>, <span class="stringliteral">&quot;faces&quot;</span>, show_faces, <span class="stringliteral">&quot;check&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (add_tree_node(<span class="stringliteral">&quot;buttons&quot;</span>, node_flag, 0)) {</div>
<div class="line">                connect(add_button(<span class="stringliteral">&quot;cube&quot;</span>, <span class="stringliteral">&quot;w=40&quot;</span>,<span class="stringliteral">&quot;&quot;</span>)-&gt;click,<span class="keyword">this</span>,&amp;shape::select_cube);</div>
<div class="line">                connect(add_button(<span class="stringliteral">&quot;prism&quot;</span>,<span class="stringliteral">&quot;w=40&quot;</span>,<span class="stringliteral">&quot;&quot;</span>)-&gt;click,<span class="keyword">this</span>,&amp;shape::select_prism);</div>
<div class="line">                connect(add_button(<span class="stringliteral">&quot;tet&quot;</span>,  <span class="stringliteral">&quot;w=40&quot;</span>,<span class="stringliteral">&quot;&quot;</span>)-&gt;click,<span class="keyword">this</span>,&amp;shape::select_tet);</div>
<div class="line">                connect(add_button(<span class="stringliteral">&quot;oct&quot;</span>,  <span class="stringliteral">&quot;w=40&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)-&gt;click,<span class="keyword">this</span>,&amp;shape::select_oct);</div>
<div class="line">                connect(add_button(<span class="stringliteral">&quot;sphere&quot;</span>,  <span class="stringliteral">&quot;w=40&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)-&gt;click,<span class="keyword">this</span>,&amp;shape::select_sphere);</div>
<div class="line">                connect(add_button(<span class="stringliteral">&quot;strip&quot;</span>,  <span class="stringliteral">&quot;w=40&quot;</span>)-&gt;click,<span class="keyword">this</span>,&amp;shape::select_strip);</div>
<div class="line">        }</div>
</div><!-- fragment --> Please note how the call to the <a class="el" href="a00096.html#a841e8ef471bf376be1c3fa97179cd218">update_member</a> in the <a class="el" href="">select_cube</a> method of the shape class. Here the action of pressing the button changes the member variable <code>shp</code>. To notify all views and controls of the <code>shp</code> member, one simply calls the <a class="el" href="a00096.html#a841e8ef471bf376be1c3fa97179cd218">update_member</a> with a pointer to the member as argument. The implementation of <a class="el" href="a00096.html#a841e8ef471bf376be1c3fa97179cd218">update_member</a> uses the <a class="el" href="a00096.html#af4350ea3d268a289aff9a9b792d8eb7f">find_view</a> and <a class="el" href="a00096.html#ac9e752ce7a60f2e4e978a54125fa036e">find_control</a> methods to enumerate all views and controls referencing the member.</p>
<h1><a class="anchor" id="cg_fltk"></a>
The cg_fltk Plugin</h1>
<p>In this section a short reference for the gui elements provided by the cg_fltk plugin. All gui elements provide the following options that can be set with the property interface of the gui elements:</p><ul>
<li>x:int32 ... x position of gui element in coordinates relative to parent</li>
<li>y:int32 ... y position of gui element in coordinates relative to parent</li>
<li>w:int32 ... width of gui element in pixels</li>
<li>h:int32 ... height of gui element in pixels</li>
<li>image:string ... file name or resource file name of an image to be loaded as icon of the gui element</li>
<li>fit_image:bool ... whether to fit icon image to the size of the gui element</li>
<li>label:string ... label of the gui element shown in the gui</li>
<li>name:string ... name of the gui element</li>
<li>tooltip:string ... tooltip shown when mouse halts over the gui element</li>
<li>active:bool ... whether gui element can handle user interaction</li>
<li>show:bool ... whether gui element is visible</li>
<li>color:int32 ... background color of gui element, where the rgba color (0xaa,0xbb,0xcc,0xdd) can be specified as 0xaabbccdd</li>
<li>align:string ... alignment of the text label of the element relativ to element. The following characters are allowed in the alignment string:<ul>
<li>'T' ... align on top of gui element</li>
<li>'t' ... align inside to top of gui element</li>
<li>'B' ... align below gui element</li>
<li>'b' ... align inside at bottom of gui element</li>
<li>'L' ... align left of gui element</li>
<li>'l' ... align inside to the left of the gui element</li>
<li>'R' ... align right of gui element</li>
<li>'r' ... align inside to the right of the gui element</li>
</ul>
</li>
</ul>
<p>Please note that when specifying options as a string, the string values must be enclosed with double quotes as usual. An example would be </p><div class="fragment"><div class="line">add_button(<span class="stringliteral">&quot;button1&quot;</span>, <span class="stringliteral">&quot;image=\&quot;but_img.png\&quot;;label=\&quot;\&quot;;align=\&quot;Tl\&quot;&quot;</span>);</div>
</div><!-- fragment --><p> The following gui elements are supported with the given properties</p><ul>
<li>add_decorator gui element types<ul>
<li>"heading" with the following new properties<ul>
<li>level:int32 ... highest level starts with 0</li>
</ul>
</li>
<li>"separator"</li>
</ul>
</li>
<li>add_view&lt;int../flt..&gt; ... only uses one gui type that does not have to be specified</li>
<li>add_view&lt;string&gt; ... only uses one gui type that does not have to be specified</li>
<li>add_control&lt;enum&gt; ... here the gui element type must define the different values of the enum as a comma or semicolon separated list of strings with optional assignment to specific integer values</li>
<li>add_control&lt;bool&gt; gui element types<ul>
<li>"check" ... check mark</li>
<li>"toggle" ... toggle button</li>
</ul>
</li>
<li>add_control&lt;int../flt..&gt; gui element types<ul>
<li>"slider" ... only slider</li>
<li>"value_slider" ... shows text input and a slider</li>
<li>"wheel" ... wheel rotating around the y-axis</li>
<li>"dial" ... wheel rotating around the z-axis</li>
<li>"adjuster" ... three buttons of different sensitivity on which the value can be dragged with the mouse</li>
<li>"value_input" ... text input only</li>
<li>the types support the following new properties<ul>
<li>min:flt64 ... minimum value</li>
<li>max:flt64 ... maximum value</li>
<li>step:flt64 ... sensitivity</li>
<li>ticks:bool ... whether to show tick marks on sliders</li>
<li>log:bool ... whether scaling on sliders is done logarithmically</li>
</ul>
</li>
</ul>
</li>
<li>add_control&lt;<a class="el" href="a00128.html">color&lt;flt32/uint8,RGB/RGBA&gt;</a>&gt; only uses one gui type that does not have to be specified</li>
<li>add_control&lt;std::string&gt; only uses one gui type that does not have to be specified </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 26 2017 12:41:45 for cgv by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
